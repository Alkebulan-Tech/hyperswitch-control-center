// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Table from "../../components/Table.bs.js";
import * as React from "react";
import * as EntityType from "../../entities/EntityType.bs.js";
import * as LogicUtils from "../../utils/LogicUtils.bs.js";
import * as HSwitchGlobalVars from "../../utils/HSwitchGlobalVars.bs.js";

var defaultColumnsForUser = [
  /* Name */ 1, /* Role */ 2, /* Email */ 0, /* Status */ 3,
];

var allColumnsForUser = [
  /* Name */ 1, /* Role */ 2, /* Email */ 0, /* Status */ 3,
];

function itemToObjMapperForUser(dict) {
  return {
    email: LogicUtils.getString(dict, "email", ""),
    name: LogicUtils.getString(dict, "name", ""),
    role_id: LogicUtils.getString(dict, "role_id", ""),
    role_name: LogicUtils.getString(dict, "role_name", ""),
    status: LogicUtils.getString(dict, "status", ""),
  };
}

function getHeadingForUser(colType) {
  switch (colType) {
    case /* Email */ 0:
      return Table.makeHeaderInfo(
        "email",
        "Email",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case /* Name */ 1:
      return Table.makeHeaderInfo(
        "name",
        "Name",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case /* Role */ 2:
      return Table.makeHeaderInfo(
        "role",
        "Role",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case /* Status */ 3:
      return Table.makeHeaderInfo(
        "status",
        "Status",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
  }
}

function roleToVariantMapper(role) {
  switch (role) {
    case "ADMIN":
      return /* Admin */ 0;
    case "CUSTOMER SUPPORT":
      return /* CustomerSupport */ 5;
    case "DEVELOPER":
      return /* Developer */ 3;
    case "IAM":
      return /* IAM */ 6;
    case "OPERATOR":
      return /* Operator */ 2;
    case "ORGANIZATION ADMIN":
      return /* OrgAdmin */ 4;
    case "VIEW ONLY":
      return /* ViewOnly */ 1;
    default:
      return /* None */ 7;
  }
}

function statusToVariantMapper(role) {
  var match = role.toUpperCase();
  switch (match) {
    case "ACTIVE":
      return /* Active */ 0;
    case "INVITATIONSENT":
      return /* InviteSent */ 1;
    default:
      return /* None */ 2;
  }
}

function getCssMapperForRole(role) {
  switch (role) {
    case /* Admin */ 0:
    case /* OrgAdmin */ 4:
      return "border-blue-200 bg-blue-200";
    case /* ViewOnly */ 1:
    case /* Operator */ 2:
    case /* Developer */ 3:
    case /* CustomerSupport */ 5:
    case /* IAM */ 6:
      return "border-light-grey bg-extra-light-grey";
    case /* None */ 7:
      return "";
  }
}

function getCssMapperForStatus(status) {
  switch (status) {
    case /* Active */ 0:
      return "text-green-700";
    case /* InviteSent */ 1:
      return "text-grey-700 opacity-50";
    case /* None */ 2:
      return "";
  }
}

function getCellForUser(data, colType) {
  var role_name = LogicUtils.snakeToTitle(data.role_name).toUpperCase();
  var role = roleToVariantMapper(role_name);
  var status = statusToVariantMapper(data.status);
  switch (colType) {
    case /* Email */ 0:
      return {
        TAG: /* Text */ 1,
        _0: data.email,
      };
    case /* Name */ 1:
      return {
        TAG: /* Text */ 1,
        _0: data.name,
      };
    case /* Role */ 2:
      return {
        TAG: /* CustomCell */ 10,
        _0: React.createElement(
          "div",
          {
            className:
              "w-fit font-semibold text-sm px-3 py-1 rounded-full border-1 " +
              getCssMapperForRole(role) +
              "",
          },
          role_name,
        ),
        _1: "",
      };
    case /* Status */ 3:
      return {
        TAG: /* CustomCell */ 10,
        _0: React.createElement(
          "div",
          {
            className:
              "font-semibold text-sm " + getCssMapperForStatus(status) + "",
          },
          status !== 1
            ? data.status.toUpperCase()
            : "INVITE SENT".toUpperCase(),
        ),
        _1: "",
      };
  }
}

function getUserData(json) {
  return LogicUtils.getArrayDataFromJson(json, itemToObjMapperForUser);
}

var userEntity = EntityType.makeEntity(
  "",
  getUserData,
  defaultColumnsForUser,
  allColumnsForUser,
  getHeadingForUser,
  getCellForUser,
  "",
  undefined,
  undefined,
  undefined,
  undefined,
  function (userId) {
    return HSwitchGlobalVars.appendDashboardPath(
      "/users/details?email=" + userId.email + "",
    );
  },
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
);

export {
  defaultColumnsForUser,
  allColumnsForUser,
  itemToObjMapperForUser,
  getHeadingForUser,
  roleToVariantMapper,
  statusToVariantMapper,
  getCssMapperForRole,
  getCssMapperForStatus,
  getCellForUser,
  getUserData,
  userEntity,
};
/* userEntity Not a pure module */
