// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as LogicUtils from "../utils/LogicUtils.bs.js";
import * as SelectModal from "./SelectModal.bs.js";

function CustomizeTableColumns(props) {
  var showSerialNumber = props.showSerialNumber;
  var sortingBasedOnDisabled = props.sortingBasedOnDisabled;
  var orderdColumnBasedOnDefaultCol = props.orderdColumnBasedOnDefaultCol;
  var isModalView = props.isModalView;
  var getHeading = props.getHeading;
  var setColumns = props.setColumns;
  var visibleColumns = props.visibleColumns;
  var allHeadersArray = props.allHeadersArray;
  var allHeadersArray$1 = allHeadersArray !== undefined ? allHeadersArray : [];
  var visibleColumns$1 = visibleColumns !== undefined ? visibleColumns : [];
  var isModalView$1 = isModalView !== undefined ? isModalView : true;
  var orderdColumnBasedOnDefaultCol$1 =
    orderdColumnBasedOnDefaultCol !== undefined
      ? orderdColumnBasedOnDefaultCol
      : false;
  var sortingBasedOnDisabled$1 =
    sortingBasedOnDisabled !== undefined ? sortingBasedOnDisabled : true;
  var showSerialNumber$1 =
    showSerialNumber !== undefined ? showSerialNumber : true;
  var headingDict = Object.fromEntries(
    allHeadersArray$1.map(function (item, index) {
      return [Curry._1(getHeading, item).title, index];
    }),
  );
  var sortByOrderOderedArr = function (a, b) {
    var positionInHeader = LogicUtils.getInt(
      headingDict,
      Curry._1(getHeading, a).title,
      0,
    );
    var positionInHeading = LogicUtils.getInt(
      headingDict,
      Curry._1(getHeading, b).title,
      0,
    );
    if (positionInHeader < positionInHeading) {
      return -1;
    } else if (positionInHeader > positionInHeading) {
      return 1;
    } else {
      return 0;
    }
  };
  var defaultColumnsString = props.defaultColumns.map(function (head) {
    return Curry._1(getHeading, head).title;
  });
  var initalHeadingData = allHeadersArray$1.map(function (head) {
    var columnName = Curry._1(getHeading, head).title;
    var isDisabled = defaultColumnsString.includes(columnName);
    return {
      label: columnName,
      value: columnName,
      isDisabled: isDisabled,
    };
  });
  var initialValues = visibleColumns$1.map(function (head) {
    return Curry._1(getHeading, head).title;
  });
  var onSubmit = function (values) {
    var getHeadingCol = function (text) {
      var index = allHeadersArray$1
        .map(function (head) {
          return Curry._1(getHeading, head).title;
        })
        .indexOf(text);
      return allHeadersArray$1[index];
    };
    var headers = Belt_Array.keepMap(values, getHeadingCol);
    var headers$1 = orderdColumnBasedOnDefaultCol$1
      ? headers.slice().toSorted(sortByOrderOderedArr)
      : headers;
    Curry._1(setColumns, function (param) {
      return headers$1;
    });
  };
  return React.createElement(SelectModal.make, {
    modalHeading: "Table Columns",
    showModal: props.showModal,
    setShowModal: props.setShowModal,
    isModalView: isModalView$1,
    onSubmit: onSubmit,
    initialValues: initialValues,
    options: initalHeadingData,
    sortingBasedOnDisabled: sortingBasedOnDisabled$1,
    showSerialNumber: showSerialNumber$1,
  });
}

var make = CustomizeTableColumns;

export { make };
/* react Not a pure module */
