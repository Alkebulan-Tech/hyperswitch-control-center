// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Icon from "./Icon.bs.js";
import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as ToolTip from "./tooltip/ToolTip.bs.js";
import * as UIUtils from "../utils/UIUtils.bs.js";
import * as Clipboard from "../libraries/Clipboard.bs.js";
import * as Js_string from "rescript/lib/es6/js_string.js";
import * as SelectBox from "./SelectBox.bs.js";
import * as LogicUtils from "../utils/LogicUtils.bs.js";
import * as MatchMedia from "../context/MatchMedia.bs.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as TimeZoneData from "../mockData/TimeZoneData.bs.js";
import * as TimeZoneHook from "../hooks/TimeZoneHook.bs.js";
import * as ConfigContext from "../context/ConfigContext.bs.js";
import * as HelperComponents from "../screens/Helpers/HelperComponents.bs.js";
import * as AddDataAttributes from "./AddDataAttributes.bs.js";
import * as TableLocalFilters from "./TableLocalFilters.bs.js";
import * as DateFormatProvider from "../context/DateFormatProvider.bs.js";
import * as UserTimeZoneProvider from "../context/UserTimeZoneProvider.bs.js";
import * as DataTableFilterOpenContext from "../context/DataTableFilterOpenContext.bs.js";

function regex(searchString) {
  return new RegExp("" + searchString + "", "gi");
}

function highlightedText(str, searchedText) {
  var shouldHighlight =
    LogicUtils.isNonEmptyString(searchedText) &&
    str.toLowerCase().includes(searchedText.toLowerCase());
  if (!shouldHighlight) {
    return str;
  }
  var re = regex(searchedText);
  var matchFn = function (matchPart, _offset, _wholeString) {
    return "@@" + matchPart + "@@";
  };
  var listText = Js_string.unsafeReplaceBy0(re, matchFn, str).split("@@");
  return listText.map(function (item, i) {
    if (
      item.toLowerCase() === searchedText.toLowerCase() &&
      searchedText.length > 0
    ) {
      return React.createElement(
        "mark",
        {
          key: i.toString(),
          className: "bg-yellow",
        },
        item,
      );
    } else {
      return React.createElement(
        "span",
        {
          key: i.toString(),
          className: "",
          value: str,
        },
        item,
      );
    }
  });
}

function getSortOrderString(order) {
  switch (order) {
    case /* INC */ 0:
      return "desc";
    case /* DEC */ 1:
      return "asc";
    case /* NONE */ 2:
      return "";
  }
}

function makeHeaderInfo(
  key,
  title,
  dataTypeOpt,
  showSortOpt,
  showFilterOpt,
  highlightCellOnHoverOpt,
  headerElement,
  description,
  data,
  isMandatory,
  showMultiSelectCheckBox,
  hideOnShrink,
  customWidth,
  param,
) {
  var dataType = dataTypeOpt !== undefined ? dataTypeOpt : /* TextType */ 1;
  var showSort = showSortOpt !== undefined ? showSortOpt : false;
  var showFilter = showFilterOpt !== undefined ? showFilterOpt : false;
  var highlightCellOnHover =
    highlightCellOnHoverOpt !== undefined ? highlightCellOnHoverOpt : false;
  return {
    key: key,
    title: title,
    dataType: dataType,
    showSort: showSort,
    showFilter: showFilter,
    highlightCellOnHover: highlightCellOnHover,
    headerElement: headerElement,
    description: description,
    data: data,
    isMandatory: isMandatory,
    showMultiSelectCheckBox: showMultiSelectCheckBox,
    hideOnShrink: hideOnShrink,
    customWidth: customWidth,
  };
}

function getCell(item) {
  return {
    TAG: /* Text */ 1,
    _0: item,
  };
}

function TableUtils$ProgressCell(props) {
  var progressPercentage = props.progressPercentage;
  return React.createElement(
    "div",
    {
      className: "w-full bg-gray-200 rounded-full",
    },
    React.createElement(
      "div",
      {
        className:
          "bg-green-700 text font-medium text-blue-100 text-left pl-5 p-0.5 leading-none rounded-full",
        style: {
          width: "" + progressPercentage.toString() + "%",
        },
      },
      progressPercentage.toString() + "%",
    ),
  );
}

var ProgressCell = {
  make: TableUtils$ProgressCell,
};

function getTextAlignmentClass(textAlign) {
  if (textAlign) {
    return "text-right px-2";
  } else {
    return "text-left";
  }
}

function TableUtils$BaseComponentMethod(props) {
  var filterKey = props.filterKey;
  var showDropDown = props.showDropDown;
  var match = React.useContext(DataTableFilterOpenContext.filterOpenContext);
  var setLclFilterOpen = match[1];
  React.useEffect(
    function () {
      Curry._2(setLclFilterOpen, filterKey, showDropDown);
    },
    [showDropDown],
  );
  return React.createElement(
    "div",
    {
      className:
        "flex px-1 pt-1 pb-0.5 items-center rounded-sm " +
        (showDropDown
          ? "bg-jp-2-light-primary-100 !text-jp-2-light-primary-600"
          : "") +
        "",
    },
    React.createElement(Icon.make, {
      name: "bars-filter",
      size: 12,
      parentClass: "cursor-pointer",
    }),
  );
}

var BaseComponentMethod = {
  make: TableUtils$BaseComponentMethod,
};

function TableUtils$LabelCell(props) {
  var highlightText = props.highlightText;
  var labelMargin = props.labelMargin;
  var text = props.text;
  var labelColor = props.labelColor;
  var labelMargin$1 = labelMargin !== undefined ? labelMargin : "";
  var highlightText$1 = highlightText !== undefined ? highlightText : "";
  var match = React.useContext(ConfigContext.configContext);
  var backgroundColor = match.globalUIConfig.backgroundColor;
  var isMobileView = MatchMedia.useMobileChecker(undefined);
  var bgOpacity = isMobileView ? "bg-opacity-12 dark:!bg-opacity-12" : "";
  var borderColor;
  switch (labelColor) {
    case /* LabelGreen */ 0:
      borderColor = "bg-green-950 " + bgOpacity + " dark:bg-opacity-50";
      break;
    case /* LabelRed */ 1:
      borderColor = "bg-red-960 " + bgOpacity + " dark:bg-opacity-50";
      break;
    case /* LabelBlue */ 2:
      borderColor = "" + backgroundColor + " dark:bg-opacity-50";
      break;
    case /* LabelGray */ 3:
      borderColor = "bg-blue-table_gray";
      break;
    case /* LabelOrange */ 4:
      borderColor = "bg-orange-950 " + bgOpacity + " dark:bg-opacity-50";
      break;
    case /* LabelYellow */ 5:
      borderColor = "bg-yellow-600";
      break;
    case /* LabelDarkGreen */ 6:
      borderColor = "bg-green-700";
      break;
    case /* LabelDarkRed */ 7:
      borderColor = "bg-red-400";
      break;
    case /* LabelBrown */ 8:
      borderColor = "bg-brown-600 bg-opacity-50";
      break;
    case /* LabelLightBlue */ 9:
      borderColor = "" + backgroundColor + " bg-opacity-50";
      break;
    case /* LabelWhite */ 10:
      borderColor = "bg-white border border-jp-gray-300";
      break;
    case /* LabelViolet */ 11:
      borderColor = "bg-violet-500";
      break;
    case /* LabelLightGreen */ 12:
      borderColor = "bg-green-700  dark:bg-opacity-50";
      break;
    case /* LabelLightRed */ 13:
      borderColor = "bg-red-400 dark:bg-opacity-50";
      break;
  }
  var textColor =
    labelColor !== 3
      ? labelColor !== 10
        ? "text-white"
        : "text-jp-gray-700"
      : "text-jp-gray-900";
  var mobileTextColor;
  if (labelColor >= 5) {
    mobileTextColor = "text-white";
  } else {
    switch (labelColor) {
      case /* LabelGreen */ 0:
        mobileTextColor = "text-green-950";
        break;
      case /* LabelRed */ 1:
        mobileTextColor = "text-red-960";
        break;
      case /* LabelBlue */ 2:
      case /* LabelGray */ 3:
        mobileTextColor = "text-white";
        break;
      case /* LabelOrange */ 4:
        mobileTextColor = "text-orange-950";
        break;
    }
  }
  var textColor$1 = isMobileView ? mobileTextColor : textColor;
  return React.createElement(
    "div",
    {
      className: "flex",
    },
    React.createElement(
      "div",
      {
        className: "flex-initial ",
      },
      React.createElement(
        "div",
        {
          className: "rounded " + borderColor + "",
        },
        React.createElement(
          "div",
          {
            className:
              "" +
              labelMargin$1 +
              " font-inter-style " +
              textColor$1 +
              " text-fs-10 font-bold px-2 py-0.5",
          },
          React.createElement(AddDataAttributes.make, {
            attributes: [["data-label", text]],
            children: React.createElement(
              "div",
              undefined,
              highlightedText(text, highlightText$1),
            ),
          }),
        ),
      ),
    ),
  );
}

var LabelCell = {
  make: TableUtils$LabelCell,
};

function TableUtils$NewLabelCell(props) {
  var labelColor = props.labelColor;
  switch (labelColor) {
    case /* LabelGreen */ 0:
      break;
    case /* LabelRed */ 1:
      break;
    case /* LabelBlue */ 2:
      break;
    case /* LabelGray */ 3:
      break;
    case /* LabelOrange */ 4:
      break;
    case /* LabelYellow */ 5:
      break;
    case /* LabelDarkGreen */ 6:
      break;
    case /* LabelDarkRed */ 7:
      break;
    case /* LabelBrown */ 8:
      break;
    case /* LabelLightBlue */ 9:
      break;
    case /* LabelWhite */ 10:
      break;
    case /* LabelViolet */ 11:
      break;
    case /* LabelLightGreen */ 12:
      break;
    case /* LabelLightRed */ 13:
      break;
  }
  var bgColor;
  if (labelColor >= 6) {
    bgColor = "bg-[#FFF9E2]";
  } else {
    switch (labelColor) {
      case /* LabelGreen */ 0:
        bgColor = "bg-[#ECFDF3]";
        break;
      case /* LabelRed */ 1:
        bgColor = "bg-[#FEECEB]";
        break;
      case /* LabelBlue */ 2:
      case /* LabelGray */ 3:
      case /* LabelOrange */ 4:
      case /* LabelYellow */ 5:
        bgColor = "bg-[#FFF9E2]";
        break;
    }
  }
  var textColor;
  if (labelColor >= 6) {
    textColor = "text-[#333333]";
  } else {
    switch (labelColor) {
      case /* LabelGreen */ 0:
        textColor = "text-[#027A48]";
        break;
      case /* LabelRed */ 1:
        textColor = "text-[#A83027]";
        break;
      case /* LabelBlue */ 2:
      case /* LabelGray */ 3:
      case /* LabelOrange */ 4:
      case /* LabelYellow */ 5:
        textColor = "text-[#333333]";
        break;
    }
  }
  var dotColor;
  if (labelColor >= 6) {
    dotColor = "fill-[#FDD744]";
  } else {
    switch (labelColor) {
      case /* LabelGreen */ 0:
        dotColor = "fill-[#12B76A]";
        break;
      case /* LabelRed */ 1:
        dotColor = "fill-[#F04438]";
        break;
      case /* LabelBlue */ 2:
      case /* LabelGray */ 3:
      case /* LabelOrange */ 4:
      case /* LabelYellow */ 5:
        dotColor = "fill-[#FDD744]";
        break;
    }
  }
  return React.createElement(
    "div",
    {
      className: "flex",
    },
    React.createElement(
      "div",
      {
        className: "flex-initial ",
      },
      React.createElement(
        "div",
        {
          className:
            "flex flex-row px-2 py-0.5 " +
            bgColor +
            " rounded-[16px] text-fs-10 font-bold " +
            textColor +
            "",
        },
        React.createElement(Icon.make, {
          name: "circle_unfilled",
          size: 6,
          className: "" + dotColor + " mr-2",
        }),
        React.createElement(
          "div",
          {
            className: "" + textColor + " font-medium text-xs",
          },
          props.text,
        ),
      ),
    ),
  );
}

var NewLabelCell = {
  make: TableUtils$NewLabelCell,
};

function TableUtils$ColoredTextCell(props) {
  var customPadding = props.customPadding;
  var customPadding$1 = customPadding !== undefined ? customPadding : "px-2";
  var textColor;
  switch (props.labelColor) {
    case /* LabelGreen */ 0:
      textColor = "text-status-green";
      break;
    case /* LabelRed */ 1:
      textColor = "text-red-980";
      break;
    case /* LabelBlue */ 2:
      textColor = "text-sky-500";
      break;
    case /* LabelGray */ 3:
      textColor = "text-grey-500";
      break;
    case /* LabelOrange */ 4:
      textColor = "text-status-text-orange";
      break;
    case /* LabelYellow */ 5:
      textColor = "text-yellow-400";
      break;
    case /* LabelDarkGreen */ 6:
      textColor = "text-green-700";
      break;
    case /* LabelDarkRed */ 7:
      textColor = "text-red-700";
      break;
    case /* LabelBrown */ 8:
      textColor = "text-yellow-800";
      break;
    case /* LabelLightBlue */ 9:
      textColor = "text-sky-300";
      break;
    case /* LabelWhite */ 10:
      textColor = "text-jp-gray-500";
      break;
    case /* LabelViolet */ 11:
      textColor = "bg-violet-500";
      break;
    case /* LabelLightGreen */ 12:
      textColor = "bg-green-700";
      break;
    case /* LabelLightRed */ 13:
      textColor = "bg-red-400";
      break;
  }
  return React.createElement(
    "div",
    {
      className: "flex",
    },
    React.createElement(
      "div",
      {
        className: "flex-initial ",
      },
      React.createElement(
        "p",
        {
          className:
            "py-0.5 fira-code text-fs-13 font-semibold " +
            textColor +
            " " +
            customPadding$1 +
            "",
        },
        props.text,
      ),
    ),
  );
}

var ColoredTextCell = {
  make: TableUtils$ColoredTextCell,
};

function TableUtils$Numeric(props) {
  var num = props.num;
  if (props.clearFormatting !== false) {
    return React.createElement(AddDataAttributes.make, {
      attributes: [["data-numeric", num.toString()]],
      children: React.createElement("div", undefined, num.toString()),
    });
  }
  var mapper = props.mapper;
  return React.createElement(AddDataAttributes.make, {
    attributes: [["data-numeric", Curry._1(mapper, num)]],
    children: React.createElement("div", undefined, Curry._1(mapper, num)),
  });
}

var Numeric = {
  make: TableUtils$Numeric,
};

function getAmountValue(amount, currency) {
  var amountSplitArr = amount.toFixed(2).split(".");
  var decimal = Core__Option.getOr(amountSplitArr[1], "00");
  var receivedValue = Core__Option.getOr(amountSplitArr[0], "");
  var formattedAmount = receivedValue.includes("e")
    ? receivedValue
    : currency === "INR"
      ? receivedValue.replace(/(\d)(?=(?:(\d\d)+(\d)(?!\d))+(?!\d))/g, "$1,")
      : receivedValue.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
  var formatted_amount = "" + formattedAmount + "." + decimal + "";
  return "" + formatted_amount + " " + currency + "";
}

function TableUtils$MoneyCell(props) {
  var customMoneyStyle = props.customMoneyStyle;
  var fontBold = props.fontBold;
  var textAlign = props.textAlign;
  var isCard = props.isCard;
  var isCard$1 = isCard !== undefined ? isCard : false;
  var textAlign$1 = textAlign !== undefined ? textAlign : /* Right */ 1;
  var fontBold$1 = fontBold !== undefined ? fontBold : false;
  var customMoneyStyle$1 =
    customMoneyStyle !== undefined ? customMoneyStyle : "";
  var textAlignClass = textAlign$1 ? "text-right px-2" : "text-left";
  var boldClass = fontBold$1
    ? "text-fs-20 font-bold text-jp-gray-900"
    : "text-fs-13 text-jp-gray-dark_disable_border_color";
  var wrapperClass = isCard$1
    ? "font-semibold font-fira-code"
    : "" +
      boldClass +
      " text-start dark:text-white " +
      textAlignClass +
      " " +
      customMoneyStyle$1 +
      "";
  var amountValue = getAmountValue(props.amount, props.currency);
  return React.createElement(AddDataAttributes.make, {
    attributes: [["data-money-cell", amountValue]],
    children: React.createElement(
      "div",
      {
        className: wrapperClass,
      },
      amountValue,
    ),
  });
}

var MoneyCell = {
  getAmountValue: getAmountValue,
  make: TableUtils$MoneyCell,
};

function TableUtils$LinkCell(props) {
  var trimLength = props.trimLength;
  var data = props.data;
  var match = React.useContext(ConfigContext.configContext);
  var match$1 = React.useState(function () {
    return false;
  });
  var setShowCopy = match$1[1];
  var isMobileView = MatchMedia.useMobileChecker(undefined);
  var trimData;
  if (trimLength !== undefined) {
    var length = isMobileView ? 36 : trimLength;
    trimData = "..".concat(Js_string.substrAtMost(0, length, data));
  } else {
    trimData = data;
  }
  var mouseOver = function (_ev) {
    Curry._1(setShowCopy, function (param) {
      return true;
    });
  };
  var mouseOut = function (_ev) {
    Curry._1(setShowCopy, function (param) {
      return false;
    });
  };
  var visibility = match$1[0] && !isMobileView ? "visible" : "invisible";
  var preventEvent = function (ev) {
    ev.stopPropagation();
  };
  return React.createElement(
    "div",
    {
      className: "flex flex-row items-center",
      onMouseOut: mouseOut,
      onMouseOver: mouseOver,
    },
    React.createElement(
      "div",
      {
        className:
          "whitespace-pre text-sm font-fira-code dark:text-opacity-75 text-right p-1 " +
          match.globalUIConfig.font.textColor.primaryNormal +
          " text-ellipsis overflow-hidden",
      },
      React.createElement(
        "a",
        {
          href: data,
          target: "_blank",
          onClick: preventEvent,
        },
        trimData,
      ),
    ),
    React.createElement(
      "div",
      {
        className: visibility,
      },
      React.createElement(Clipboard.Copy.make, {
        data: data,
        toolTipPosition: /* Top */ 0,
      }),
    ),
  );
}

var LinkCell = {
  make: TableUtils$LinkCell,
};

function TableUtils$DateCell(props) {
  var hideTime = props.hideTime;
  var textAlign = props.textAlign;
  var textStyle = props.textStyle;
  var isCard = props.isCard;
  var timestamp = props.timestamp;
  var isCard$1 = isCard !== undefined ? isCard : false;
  var textAlign$1 = textAlign !== undefined ? textAlign : /* Right */ 1;
  var hideTime$1 = hideTime !== undefined ? hideTime : false;
  var isMobileView = MatchMedia.useMobileChecker(undefined);
  var dateFormat = React.useContext(DateFormatProvider.dateFormatContext);
  var dateFormat$1 = isMobileView ? "DD MMM HH:mm" : dateFormat;
  var isoStringToCustomTimeZone =
    TimeZoneHook.useIsoStringToCustomTimeZoneInFloat(undefined);
  var getFormattedDate = function (dateStr) {
    try {
      var customTimeZone = Curry._1(isoStringToCustomTimeZone, dateStr);
      return TimeZoneHook.formattedDateTimeFloat(customTimeZone, dateFormat$1);
    } catch (exn) {
      return "" + dateStr + " - unable to parse";
    }
  };
  var fontType = textStyle !== undefined ? textStyle : "font-semibold";
  var match = React.useContext(UserTimeZoneProvider.userTimeContext);
  var selectedTimeZoneData = TimeZoneData.getTimeZoneData(match[0]);
  var selectedTimeZoneAlias = selectedTimeZoneData.title;
  var textAlignClass = textAlign$1 ? "text-right px-2" : "text-left";
  var wrapperClass = isCard$1
    ? fontType
    : "dark:text-jp-gray-text_darktheme dark:text-opacity-75 " +
      textAlignClass +
      " font-inter-style";
  return React.createElement(AddDataAttributes.make, {
    attributes: [["data-date", getFormattedDate(timestamp)]],
    children: React.createElement(
      "div",
      {
        className: "" + wrapperClass + " whitespace-nowrap",
      },
      hideTime$1
        ? getFormattedDate(timestamp).slice(0, 12)
        : "" + getFormattedDate(timestamp) + " " + selectedTimeZoneAlias + "",
    ),
  });
}

var DateCell = {
  make: TableUtils$DateCell,
};

function TableUtils$StartEndDateCell(props) {
  return React.createElement(
    "div",
    undefined,
    React.createElement(
      "div",
      {
        className: "flex justify-between",
      },
      "Start: ",
      React.createElement(TableUtils$DateCell, {
        timestamp: props.startDate,
      }),
    ),
    React.createElement(
      "div",
      {
        className: "flex justify-between",
      },
      "End: ",
      React.createElement(TableUtils$DateCell, {
        timestamp: props.endDate,
      }),
    ),
  );
}

var StartEndDateCell = {
  make: TableUtils$StartEndDateCell,
};

function TableUtils$EllipsisText(props) {
  var toolTipPosition = props.toolTipPosition;
  var ellipsisThreshold = props.ellipsisThreshold;
  var ellipsisIdentifier = props.ellipsisIdentifier;
  var ellipseClass = props.ellipseClass;
  var isEllipsisTextRelative = props.isEllipsisTextRelative;
  var highlightText = props.highlightText;
  var width = props.width;
  var text = props.text;
  var highlightText$1 = highlightText !== undefined ? highlightText : "";
  var isEllipsisTextRelative$1 =
    isEllipsisTextRelative !== undefined ? isEllipsisTextRelative : true;
  var ellipseClass$1 = ellipseClass !== undefined ? ellipseClass : "";
  var ellipsisIdentifier$1 =
    ellipsisIdentifier !== undefined ? ellipsisIdentifier : "";
  var ellipsisThreshold$1 =
    ellipsisThreshold !== undefined ? ellipsisThreshold : 20;
  var toolTipPosition$1 =
    toolTipPosition !== undefined ? toolTipPosition : /* Right */ 3;
  var modifiedText = LogicUtils.isNonEmptyString(ellipsisIdentifier$1)
    ? Core__Option.getOr(text.split(ellipsisIdentifier$1)[0], "") + "..."
    : text;
  var ellipsesCondition = LogicUtils.isNonEmptyString(ellipsisIdentifier$1)
    ? ellipsisIdentifier$1.includes(text)
    : text.length > ellipsisThreshold$1;
  if (ellipsesCondition) {
    return React.createElement(ToolTip.make, {
      description: text,
      toolTipFor: Caml_option.some(
        React.createElement(
          "div",
          {
            className:
              "whitespace-pre text-ellipsis overflow-x-hidden " + width + "",
          },
          highlightedText(modifiedText, highlightText$1),
        ),
      ),
      tooltipForWidthClass: ellipseClass$1,
      toolTipPosition: toolTipPosition$1,
      contentAlign: /* Left */ 0,
      isRelative: isEllipsisTextRelative$1,
    });
  } else {
    return React.createElement(
      "div",
      {
        className:
          "whitespace-pre text-ellipsis " + ellipseClass$1 + " " + width + "",
      },
      highlightedText(text, highlightText$1),
    );
  }
}

var EllipsisText = {
  make: TableUtils$EllipsisText,
};

function TableUtils$TrimmedText(props) {
  var hideShowMore = props.hideShowMore;
  var highlightText = props.highlightText;
  var width = props.width;
  var text = props.text;
  var highlightText$1 = highlightText !== undefined ? highlightText : "";
  var hideShowMore$1 = hideShowMore !== undefined ? hideShowMore : false;
  var match = React.useContext(ConfigContext.configContext);
  var match$1 = React.useState(function () {
    return true;
  });
  var setshow = match$1[1];
  var show = match$1[0];
  var breakWords = hideShowMore$1
    ? ""
    : "whitespace-nowrap text-ellipsis overflow-x-hidden";
  if (text.length > 40) {
    return React.createElement(
      "div",
      {
        className: show
          ? "" + breakWords + "  justify-content " + width + ""
          : "justify-content",
      },
      React.createElement(AddDataAttributes.make, {
        attributes: [["data-trimmed-text", text]],
        children: React.createElement(
          "div",
          {
            className: hideShowMore$1 ? "truncate" : "",
          },
          highlightedText(text, highlightText$1),
        ),
      }),
      hideShowMore$1
        ? null
        : React.createElement(
            "div",
            {
              className:
                "" +
                match.globalUIConfig.font.textColor.primaryNormal +
                " cursor-pointer",
              onClick: function (param) {
                Curry._1(setshow, function (show) {
                  return !show;
                });
              },
            },
            show ? "More" : "Less",
          ),
    );
  } else {
    return React.createElement(
      "div",
      undefined,
      React.createElement(AddDataAttributes.make, {
        attributes: [["data-trimmed-text", text]],
        children: React.createElement(
          "div",
          {
            className: hideShowMore$1
              ? "justify-content " + width + " truncate"
              : "",
          },
          highlightedText(text, highlightText$1),
        ),
      }),
    );
  }
}

var TrimmedText = {
  make: TableUtils$TrimmedText,
};

function TableUtils$TableFilterCell(props) {
  var cell = props.cell;
  switch (cell.TAG | 0) {
    case /* DropDownFilter */ 0:
      return React.createElement(TableLocalFilters.FilterDropDown.make, {
        val: cell._0,
        arr: cell._1,
      });
    case /* TextFilter */ 1:
      return React.createElement(TableLocalFilters.TextFilterCell.make, {
        val: cell._0,
      });
    case /* Range */ 2:
      return React.createElement(TableLocalFilters.RangeFilterCell.make, {
        minVal: cell._1,
        maxVal: cell._2,
        val: cell._0,
      });
  }
}

var TableFilterCell = {
  make: TableUtils$TableFilterCell,
};

function TableUtils$DeltaColumn(props) {
  var delta = props.delta;
  var value = props.value;
  var detlaStr = delta.toFixed(2) + "%";
  var match =
    delta === 0
      ? ["", "", "", "", "bg-jp-2-gray-30"]
      : delta < 0
        ? [
            "",
            "text-red-980",
            "text-jp-2-red-100",
            "arrow-down",
            "bg-jp-2-red-100",
          ]
        : [
            "+",
            "text-green-950",
            "text-jp-2-green-300",
            "arrow-up",
            "bg-jp-2-green-50",
          ];
  var detlaStr$1 = match[0] + detlaStr;
  var paraparentCss = "flex items-center rounded";
  return React.createElement(
    "div",
    {
      className: "flex",
    },
    React.createElement(
      "div",
      {
        className: "flex justify-between",
      },
      React.createElement(
        "div",
        {
          className: paraparentCss,
        },
        React.createElement(
          "p",
          {
            className: "px-2 py-0.5 fira-code text-fs-13",
          },
          value.toFixed(2) + "%",
        ),
      ),
      React.createElement(UIUtils.RenderIf.make, {
        condition: delta !== value,
        children: React.createElement(
          "div",
          {
            className: paraparentCss,
          },
          React.createElement(
            "p",
            {
              className: "px-2 py-0.5 fira-code text-fs-10  " + match[1] + "",
            },
            detlaStr$1,
          ),
        ),
      }),
    ),
  );
}

var DeltaColumn = {
  make: TableUtils$DeltaColumn,
};

function TableUtils$TableCell(props) {
  var ellipseClass = props.ellipseClass;
  var isEllipsisTextRelative = props.isEllipsisTextRelative;
  var fontStyle = props.fontStyle;
  var clearFormatting = props.clearFormatting;
  var hideShowMore = props.hideShowMore;
  var highlightText = props.highlightText;
  var customDateStyle = props.customDateStyle;
  var customMoneyStyle = props.customMoneyStyle;
  var fontBold = props.fontBold;
  var cell = props.cell;
  var fontBold$1 = fontBold !== undefined ? fontBold : false;
  var customMoneyStyle$1 =
    customMoneyStyle !== undefined ? customMoneyStyle : "";
  var customDateStyle$1 = customDateStyle !== undefined ? customDateStyle : "";
  var highlightText$1 = highlightText !== undefined ? highlightText : "";
  var hideShowMore$1 = hideShowMore !== undefined ? hideShowMore : false;
  var clearFormatting$1 =
    clearFormatting !== undefined ? clearFormatting : false;
  var fontStyle$1 = fontStyle !== undefined ? fontStyle : "";
  var isEllipsisTextRelative$1 =
    isEllipsisTextRelative !== undefined ? isEllipsisTextRelative : true;
  var ellipseClass$1 = ellipseClass !== undefined ? ellipseClass : "";
  switch (cell.TAG | 0) {
    case /* Label */ 0:
      var x = cell._0;
      return React.createElement(AddDataAttributes.make, {
        attributes: [["data-testid", x.title.toLowerCase()]],
        children: React.createElement(TableUtils$LabelCell, {
          labelColor: x.color,
          text: x.title,
          labelMargin: props.labelMargin,
          highlightText: highlightText$1,
          fontStyle: fontStyle$1,
          showIcon: x.showIcon,
        }),
      });
    case /* EllipsisText */ 2:
      var text = cell._0;
      return React.createElement(AddDataAttributes.make, {
        attributes: [["data-testid", text.toLowerCase()]],
        children: React.createElement(TableUtils$EllipsisText, {
          text: text,
          width: cell._1,
          highlightText: highlightText$1,
          isEllipsisTextRelative: isEllipsisTextRelative$1,
          ellipseClass: ellipseClass$1,
        }),
      });
    case /* Currency */ 3:
      return React.createElement(TableUtils$MoneyCell, {
        amount: cell._0,
        currency: cell._1,
        textAlign: props.textAlign,
        fontBold: fontBold$1,
        customMoneyStyle: customMoneyStyle$1,
      });
    case /* Date */ 4:
      var timestamp = cell._0;
      if (LogicUtils.isNonEmptyString(timestamp)) {
        return React.createElement(TableUtils$DateCell, {
          timestamp: timestamp,
          textAlign: /* Left */ 0,
          customDateStyle: customDateStyle$1,
        });
      } else {
        return React.createElement("div", undefined, "-");
      }
    case /* DateWithoutTime */ 5:
      var timestamp$1 = cell._0;
      if (LogicUtils.isNonEmptyString(timestamp$1)) {
        return React.createElement(TableUtils$DateCell, {
          timestamp: timestamp$1,
          textAlign: /* Left */ 0,
          customDateStyle: customDateStyle$1,
          hideTime: true,
        });
      } else {
        return React.createElement("div", undefined, "-");
      }
    case /* StartEndDate */ 6:
      return React.createElement(TableUtils$StartEndDateCell, {
        startDate: cell._0,
        endDate: cell._1,
      });
    case /* Link */ 8:
      return React.createElement(TableUtils$LinkCell, {
        data: cell._0,
        trimLength: 55,
      });
    case /* Progress */ 9:
      return React.createElement(TableUtils$ProgressCell, {
        progressPercentage: cell._0,
      });
    case /* InputField */ 7:
    case /* CustomCell */ 10:
      return cell._0;
    case /* DisplayCopyCell */ 11:
      return React.createElement(HelperComponents.CopyTextCustomComp.make, {
        displayValue: cell._0,
      });
    case /* TrimmedText */ 12:
      return React.createElement(TableUtils$TrimmedText, {
        text: cell._0,
        width: cell._1,
        highlightText: highlightText$1,
        hideShowMore: hideShowMore$1,
      });
    case /* DeltaPercentage */ 13:
      return React.createElement(TableUtils$DeltaColumn, {
        value: cell._0,
        delta: cell._1,
      });
    case /* Text */ 1:
    case /* DropDown */ 14:
      break;
    case /* Numeric */ 15:
      return React.createElement(TableUtils$Numeric, {
        num: cell._0,
        mapper: cell._1,
        clearFormatting: clearFormatting$1,
      });
    case /* ColoredText */ 16:
      var x$1 = cell._0;
      return React.createElement(TableUtils$ColoredTextCell, {
        labelColor: x$1.color,
        text: x$1.title,
      });
  }
  var x$2 = cell._0;
  var x$3 = LogicUtils.isEmptyString(x$2) ? "NA" : x$2;
  return React.createElement(AddDataAttributes.make, {
    attributes: [
      ["data-desc", x$3],
      ["data-testid", x$3.toLowerCase()],
    ],
    children: React.createElement(
      "div",
      undefined,
      highlightedText(x$3, highlightText$1),
    ),
  });
}

var TableCell = {
  make: TableUtils$TableCell,
};

function TableUtils$NewTableCell(props) {
  var fontStyle = props.fontStyle;
  var clearFormatting = props.clearFormatting;
  var hideShowMore = props.hideShowMore;
  var highlightText = props.highlightText;
  var customDateStyle = props.customDateStyle;
  var customMoneyStyle = props.customMoneyStyle;
  var fontBold = props.fontBold;
  var cell = props.cell;
  var fontBold$1 = fontBold !== undefined ? fontBold : false;
  var customMoneyStyle$1 =
    customMoneyStyle !== undefined ? customMoneyStyle : "";
  var customDateStyle$1 = customDateStyle !== undefined ? customDateStyle : "";
  var highlightText$1 = highlightText !== undefined ? highlightText : "";
  var hideShowMore$1 = hideShowMore !== undefined ? hideShowMore : false;
  var clearFormatting$1 =
    clearFormatting !== undefined ? clearFormatting : false;
  var fontStyle$1 = fontStyle !== undefined ? fontStyle : "";
  switch (cell.TAG | 0) {
    case /* Label */ 0:
      var x = cell._0;
      return React.createElement(TableUtils$NewLabelCell, {
        labelColor: x.color,
        text: x.title,
        labelMargin: props.labelMargin,
        highlightText: highlightText$1,
        fontStyle: fontStyle$1,
      });
    case /* EllipsisText */ 2:
      return React.createElement(TableUtils$EllipsisText, {
        text: cell._0,
        width: cell._1,
        highlightText: highlightText$1,
      });
    case /* Currency */ 3:
      return React.createElement(TableUtils$MoneyCell, {
        amount: cell._0,
        currency: cell._1,
        textAlign: props.textAlign,
        fontBold: fontBold$1,
        customMoneyStyle: customMoneyStyle$1,
      });
    case /* Date */ 4:
      var timestamp = cell._0;
      if (LogicUtils.isNonEmptyString(timestamp)) {
        return React.createElement(TableUtils$DateCell, {
          timestamp: timestamp,
          textAlign: /* Left */ 0,
          customDateStyle: customDateStyle$1,
        });
      } else {
        return React.createElement("div", undefined, "-");
      }
    case /* DateWithoutTime */ 5:
      var timestamp$1 = cell._0;
      if (LogicUtils.isNonEmptyString(timestamp$1)) {
        return React.createElement(TableUtils$DateCell, {
          timestamp: timestamp$1,
          textAlign: /* Left */ 0,
          customDateStyle: customDateStyle$1,
          hideTime: true,
        });
      } else {
        return React.createElement("div", undefined, "-");
      }
    case /* StartEndDate */ 6:
      return React.createElement(TableUtils$StartEndDateCell, {
        startDate: cell._0,
        endDate: cell._1,
      });
    case /* Link */ 8:
      return React.createElement(TableUtils$LinkCell, {
        data: cell._0,
        trimLength: 55,
      });
    case /* Progress */ 9:
      return React.createElement(TableUtils$ProgressCell, {
        progressPercentage: cell._0,
      });
    case /* InputField */ 7:
    case /* CustomCell */ 10:
      return cell._0;
    case /* DisplayCopyCell */ 11:
      return React.createElement(HelperComponents.CopyTextCustomComp.make, {
        displayValue: cell._0,
      });
    case /* TrimmedText */ 12:
      return React.createElement(TableUtils$TrimmedText, {
        text: cell._0,
        width: cell._1,
        highlightText: highlightText$1,
        hideShowMore: hideShowMore$1,
      });
    case /* DeltaPercentage */ 13:
      return React.createElement(TableUtils$DeltaColumn, {
        value: cell._0,
        delta: cell._1,
      });
    case /* Text */ 1:
    case /* DropDown */ 14:
      break;
    case /* Numeric */ 15:
      return React.createElement(TableUtils$Numeric, {
        num: cell._0,
        mapper: cell._1,
        clearFormatting: clearFormatting$1,
      });
    case /* ColoredText */ 16:
      var x$1 = cell._0;
      return React.createElement(TableUtils$ColoredTextCell, {
        labelColor: x$1.color,
        text: x$1.title,
      });
  }
  var x$2 = cell._0;
  var x$3 = LogicUtils.isEmptyString(x$2) ? "NA" : x$2;
  return React.createElement(AddDataAttributes.make, {
    attributes: [["data-desc", x$3]],
    children: React.createElement(
      "div",
      undefined,
      highlightedText(x$3, highlightText$1),
    ),
  });
}

var NewTableCell = {
  make: TableUtils$NewTableCell,
};

function getTableCellValue(cell) {
  switch (cell.TAG | 0) {
    case /* CustomCell */ 10:
      return cell._1;
    case /* StartEndDate */ 6:
    case /* InputField */ 7:
    case /* Progress */ 9:
    case /* TrimmedText */ 12:
    case /* DropDown */ 14:
      return "";
    case /* Currency */ 3:
    case /* DeltaPercentage */ 13:
    case /* Numeric */ 15:
      return cell._0.toString();
    case /* Label */ 0:
    case /* ColoredText */ 16:
      return cell._0.title;
    default:
      return cell._0;
  }
}

function TableUtils$SortIcons(props) {
  var size = props.size;
  var match;
  switch (props.order) {
    case /* INC */ 0:
      match = ["text-gray-400", "text-gray-300"];
      break;
    case /* DEC */ 1:
      match = ["text-gray-300", "text-gray-400"];
      break;
    case /* NONE */ 2:
      match = ["text-gray-400", "text-gray-400"];
      break;
  }
  return React.createElement(
    "div",
    {
      className: "flex flex-col justify-center",
    },
    React.createElement(Icon.make, {
      name: "sort-up",
      size: size,
      className: "-mb-2 " + match[0] + "",
    }),
    React.createElement(Icon.make, {
      name: "sort-down",
      size: size,
      className: match[1],
    }),
  );
}

var SortIcons = {
  make: TableUtils$SortIcons,
};

function TableUtils$HeaderActions(props) {
  var filterKey = props.filterKey;
  var isLastCol = props.isLastCol;
  var filterRow = props.filterRow;
  var actionOptions = props.actionOptions;
  var actionOptions$1 =
    actionOptions !== undefined
      ? actionOptions
      : [
          {
            label: "Sort Ascending",
            value: "DEC",
            icon: {
              TAG: /* Euler */ 3,
              _0: "sortAscending",
            },
          },
          {
            label: "Sort Descending",
            value: "INC",
            icon: {
              TAG: /* Euler */ 3,
              _0: "sortDescending",
            },
          },
        ];
  var isLastCol$1 = isLastCol !== undefined ? isLastCol : false;
  var match = React.useState(function () {
    return false;
  });
  var getSortOrderToString = function (order) {
    switch (order) {
      case /* INC */ 0:
        return "INC";
      case /* DEC */ 1:
        return "DEC";
      case /* NONE */ 2:
        return "";
    }
  };
  var actionInput_onBlur = function (_ev) {};
  var actionInput_onChange = props.onChange;
  var actionInput_onFocus = function (_ev) {};
  var actionInput_value = getSortOrderToString(props.order);
  var actionInput = {
    name: "heading",
    onBlur: actionInput_onBlur,
    onChange: actionInput_onChange,
    onFocus: actionInput_onFocus,
    value: actionInput_value,
    checked: true,
  };
  var customButton =
    filterRow !== undefined
      ? React.createElement(
          "div",
          {
            className: "flex relative flex-col w-full bg-white rounded-b-lg",
          },
          React.createElement("div", {
            className: "w-full h-[1px] bg-jp-2-light-gray-400 px-1",
          }),
          React.createElement(TableUtils$TableFilterCell, {
            cell: filterRow,
          }),
        )
      : null;
  return React.createElement(SelectBox.BaseDropdown.make, {
    buttonText: "",
    allowMultiSelect: false,
    input: actionInput,
    showClearAll: false,
    showSelectAll: false,
    options: actionOptions$1,
    hideMultiSelectButtons: true,
    baseComponentMethod: function (showDropDown) {
      return React.createElement(TableUtils$BaseComponentMethod, {
        showDropDown: showDropDown,
        filterKey: filterKey,
      });
    },
    autoApply: true,
    fixedDropDownDirection: isLastCol$1
      ? /* BottomLeft */ 0
      : /* BottomRight */ 2,
    marginTop: "mt-5.5",
    dropDownCustomBtnClick: match[0],
    showCustomBtnAtEnd: true,
    customButton: Caml_option.some(customButton),
  });
}

var HeaderActions = {
  make: TableUtils$HeaderActions,
};

export {
  regex,
  highlightedText,
  getSortOrderString,
  makeHeaderInfo,
  getCell,
  ProgressCell,
  getTextAlignmentClass,
  BaseComponentMethod,
  LabelCell,
  NewLabelCell,
  ColoredTextCell,
  Numeric,
  MoneyCell,
  LinkCell,
  DateCell,
  StartEndDateCell,
  EllipsisText,
  TrimmedText,
  TableFilterCell,
  DeltaColumn,
  TableCell,
  NewTableCell,
  getTableCellValue,
  SortIcons,
  HeaderActions,
};
/* Icon Not a pure module */
