// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as MatchMedia from "./MatchMedia.bs.js";
import * as ThemeUtils from "./ThemeUtils.bs.js";

function defaultSetter(param) {}

var themeContext = React.createContext([/* Light */ 0, defaultSetter]);

var make = themeContext.Provider;

var Parent = {
  make: make,
};

function useTheme(param) {
  return React.useContext(themeContext)[0];
}

function ThemeProvider(props) {
  var eventTheme = ThemeUtils.useThemeFromEvent(undefined);
  var isCurrentlyDark = MatchMedia.useMatchMedia(
    "(prefers-color-scheme: dark)",
  );
  var match = React.useState(function () {
    return /* Light */ 0;
  });
  var setThemeBase = match[1];
  var theme =
    eventTheme !== undefined
      ? eventTheme === "Dark"
        ? /* Dark */ 1
        : /* Light */ 0
      : window !== window.parent
        ? /* Light */ 0
        : match[0];
  var setTheme = React.useCallback(
    function (value) {
      Curry._1(setThemeBase, function (param) {
        return value;
      });
    },
    [setThemeBase],
  );
  React.useEffect(
    function () {
      Curry._1(setTheme, /* Light */ 0);
    },
    [isCurrentlyDark],
  );
  var themeClassName = theme ? "dark" : "";
  var value = React.useMemo(
    function () {
      return [theme, setTheme];
    },
    [theme, setTheme],
  );
  React.useEffect(function () {
    if (theme === /* Dark */ 1) {
      Curry._1(setTheme, /* Light */ 0);
    }
  }, []);
  return React.createElement(make, {
    value: value,
    children: React.createElement(
      "div",
      {
        className: themeClassName,
      },
      React.createElement(
        "div",
        {
          className:
            "bg-jp-gray-100 dark:bg-jp-gray-darkgray_background text-gray-700 dark:text-gray-200 red:bg-red",
        },
        props.children,
      ),
    ),
  });
}

var make$1 = ThemeProvider;

export { defaultSetter, themeContext, Parent, useTheme, make$1 as make };
/* themeContext Not a pure module */
